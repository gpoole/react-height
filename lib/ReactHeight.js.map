{"version":3,"sources":["../src/ReactHeight.js"],"names":[],"mappings":"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","file":"ReactHeight.js","sourcesContent":["/* eslint \"react/no-did-mount-set-state\":0 */\n/* eslint \"react/no-did-update-set-state\":0 */\n\n\nimport React from 'react';\nimport {shouldComponentUpdate} from 'react/lib/ReactComponentWithPureRenderMixin';\n\nconst ReactHeight = React.createClass({\n  propTypes: {\n    children: React.PropTypes.node.isRequired,\n    onHeightReady: React.PropTypes.func,\n    onWidthReady: React.PropTypes.func,\n    onDimensionsReady: React.PropTypes.func,\n    hidden: React.PropTypes.bool,\n    dirty: React.PropTypes.bool\n  },\n\n\n  getDefaultProps() {\n    return {hidden: false, dirty: true};\n  },\n\n\n  getInitialState() {\n    return {\n      height: 0, width: 0, dirty: this.props.dirty\n    };\n  },\n\n  componentDidMount() {\n    const height = this.wrapper.clientHeight;\n    const width = this.wrapper.clientWidth;\n    const dirty = false;\n\n    this.setState({height, width, dirty}, this.emitDimensions());\n  },\n\n\n  componentWillReceiveProps({children, dirty}) {\n    if (children !== this.props.children || dirty) {\n      this.setState({dirty: true});\n    }\n  },\n\n\n  shouldComponentUpdate,\n\n\n  componentDidUpdate() {\n    const height = this.wrapper.clientHeight;\n    const width = this.wrapper.clientWidth;\n    const dirty = false;\n\n    if (height === this.state.height && width === this.state.width) {\n      this.setState({dirty});\n    } else {\n      this.setState({height, width, dirty}, this.emitDimensions());\n    }\n  },\n\n  emitDimensions() {\n    const {width: oldWidth, height: oldHeight} = this.state;\n\n    return () => {\n      const {onHeightReady, onWidthReady, onDimensionsReady} = this.props;\n      const {width, height} = this.state;\n\n      if (typeof onHeightReady === 'function' && height !== oldHeight) {\n        onHeightReady(height);\n      }\n\n      if (typeof onWidthReady === 'function' && width !== oldWidth) {\n        onWidthReady(width);\n      }\n\n      if (typeof onDimensionsReady === 'function') {\n        onDimensionsReady({width, height});\n      }\n    };\n  },\n\n  setWrapperRef(el) {\n    this.wrapper = el;\n  },\n\n\n  render() {\n    const {onHeightReady: _, hidden, children, ...props} = this.props;\n    const {dirty} = this.state;\n\n    if (hidden && !dirty) {\n      return null;\n    }\n\n    if (hidden) {\n      return (\n        <div style={{height: 0, width: 0, overflow: 'hidden'}}>\n          <div ref={this.setWrapperRef} {...props}>{children}</div>\n        </div>\n      );\n    }\n\n    return <div ref={this.setWrapperRef} {...props}>{children}</div>;\n  }\n});\n\n\nexport default ReactHeight;\n"]}